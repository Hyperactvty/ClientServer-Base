<mat-card>
  <mat-card-header layout="row">
    <mat-card-title>
      <span>{{ msg }}</span>
    </mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <form [formGroup]="generatorForm" novalidate>
      <div layout="row">
        <mat-form-field flex>
          <mat-select
            placeholder="Choose Vendor"
            formControlName="vendorid"
          >
            <mat-option
              *ngFor="let vendor of vendors$ | async"
              [value]="vendor"
              >{{ vendor.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div *ngIf="pickedVendor" layout="row">
        <mat-form-field flex>
          <mat-select
            placeholder="Choose Report"
            formControlName="reportid"
            (change)="onPickProduct()"
          >
            <mat-option
              *ngFor="let product of pos$ | async"
              [value]="product"
            >
              {{ product.podate }}</mat-option
            >
          </mat-select>
        </mat-form-field>
      </div>
      <br />
      <div *ngIf="pickedProduct" class="row">
        <table>
          <tr>
            <th colspan="4" class="pad-xs" style="font-weight: bold; padding: 2vh; font-size: 20px; text-align: center">
               Purchase Order: {{ selectedPO.id }}
            </th>
          </tr>
          <tr>
              <th colspan="4" class="pad-xs" style="font-weight: bold; padding: 2vh; font-size: 15px; text-align: center">
                 created on: {{ selectedPO.podate | date: 'short' : 'GMT-5'}}
              </th>
            </tr>
          <tr style="font-weight: bold; background-color: #000">
          <td style="text-align: center; width: 20vw; padding-top: 2vh; padding-bottom: 2vh;">
              Name
          </td>
            <td style="text-align: center; width: 20vw; padding-top: 2vh; padding-bottom: 2vh;">
              QTY
            </td>
            <td style="text-align: center; width: 20vw; padding-top: 2vh; padding-bottom: 2vh;">
              Cost
            </td>
            <td style="text-align: center; width: 20vw; padding-top: 2vh; padding-bottom: 2vh;">
              Extended
            </td>
          </tr>
          <tr *ngFor="let item of poItems">
              <td class="text-right" style="padding-top: 1vh; padding-bottom: 1vh">
                  {{ item.name }}
                </td>
            <td class="text-center" style="text-align:center; padding-top: 1vh; padding-bottom: 1vh">
              {{ item.qty  }}
              
            </td>
            <td class="text-right" style="text-align:center; padding-top: 1vh; padding-bottom: 1vh">
              {{ item.costprice | currency: "USD":"symbol":"1.2-2" }}
            </td>
            <td style="padding-top: 1vh; padding-bottom: 1vh; text-align: right">
              {{ item.costprice * item.qty | currency: "USD":"symbol":"1.2-2" }}
            </td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: right">Sub:</td>
            <td class="my-primary-text" style="font-weight: 600; text-align: right;color:#fff">
              {{ subtotal | currency: "USD":"symbol":"1.2-2" }}
            </td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: right">Tax:</td>
            <td class="my-primary-text" style="font-weight: 600; text-align: right;color:#fff">
              {{ tax | currency: "USD":"symbol":"1.2-2" }}
            </td>
          </tr>
          <tr>
            <td colspan="3" style="text-align: right">Total:</td>
            <td class="my-primary-text" style="font-weight: 600; text-align: right;color:#fff">
              {{ total | currency: "USD":"symbol":"1.2-2" }}
            </td>
          </tr>
        </table>
      </div>
      
      <div style="text-align:center;" *ngIf="hasProducts">
        <button mat-raised-button type="submit" (click)="viewPdf()">View PDF</button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
